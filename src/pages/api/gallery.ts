import type { APIRoute } from "astro";

export const prerender = false;

export const items = [
  {
    "src": "/img/gallery/compressed/jesuscross.webp",
    "alt": "jesuscross",
    "title": "",
    "description": "",
    "category": ""
  },
  {
    "src": "/img/gallery/compressed/angel.webp",
    "alt": "angel",
    "title": "",
    "description": "",
    "category": ""
  },
  {
    "src": "/img/gallery/compressed/lying.webp",
    "alt": "lying",
    "title": "",
    "description": "",
    "category": ""
  },
  {
    "src": "/img/gallery/compressed/angel death.webp",
    "alt": "angel death",
    "title": "",
    "description": "",
    "category": ""
  },
  {
    "src": "/img/gallery/compressed/Space-Marine-2.webp",
    "alt": "Space-Marine-2",
    "title": "",
    "description": "",
    "category": ""
  },
  {
    "src": "/img/gallery/compressed/fairy.webp",
    "alt": "fairy",
    "title": "",
    "description": "",
    "category": ""
  },
  {
    "src": "/img/gallery/compressed/angel2.webp",
    "alt": "angel2",
    "title": "",
    "description": "",
    "category": ""
  },
  {
    "src": "/img/gallery/compressed/portrait.webp",
    "alt": "portrait",
    "title": "",
    "description": "",
    "category": ""
  },
  {
    "src": "/img/gallery/compressed/death.webp",
    "alt": "death",
    "title": "",
    "description": "",
    "category": ""
  },
  {
    "src": "/img/gallery/compressed/war.webp",
    "alt": "war",
    "title": "",
    "description": "",
    "category": ""
  },
  {
    "src": "/img/gallery/compressed/mermaid.webp",
    "alt": "mermaid",
    "title": "",
    "description": "",
    "category": ""
  },
  {
    "src": "/img/gallery/compressed/jesus2.webp",
    "alt": "jesus2",
    "title": "",
    "description": "",
    "category": ""
  },
  
  {
    "src": "/img/gallery/compressed/nativity scene.webp",
    "alt": "nativity scene",
    "title": "",
    "description": "",
    "category": ""
  },
  {
    "src": "/img/gallery/compressed/gundam23.webp",
    "alt": "gundam23",
    "title": "",
    "description": "",
    "category": ""
  },
  {
    "src": "/img/gallery/compressed/deathSketch.webp",
    "alt": "deathSketch",
    "title": "",
    "description": "",
    "category": ""
  },
  {
    "src": "/img/gallery/compressed/dragon.webp",
    "alt": "dragon",
    "title": "",
    "description": "",
    "category": ""
  },
  {
    "src": "/img/gallery/compressed/gundam.webp",
    "alt": "gundam",
    "title": "",
    "description": "",
    "category": ""
  },
  {
    "src": "/img/gallery/compressed/knight.webp",
    "alt": "knight",
    "title": "",
    "description": "",
    "category": ""
  },
  {
    "src": "/img/gallery/compressed/jesusSketch.webp",
    "alt": "jesusSketch",
    "title": "",
    "description": "",
    "category": ""
  },
  {
    "src": "/img/gallery/compressed/otter.webp",
    "alt": "otter",
    "title": "",
    "description": "",
    "category": ""
  },
  {
    "src": "/img/gallery/compressed/wolf.webp",
    "alt": "wolf",
    "title": "",
    "description": "",
    "category": ""
  },
  {
    "src": "/img/gallery/compressed/potions1.webp",
    "alt": "potions1",
    "title": "",
    "description": "",
    "category": ""
  },
  {
    "src": "/img/gallery/compressed/potions2.webp",
    "alt": "potions2",
    "title": "",
    "description": "",
    "category": ""
  },
  {
    "src": "/img/gallery/compressed/jesuscross2.webp",
    "alt": "jesuscross2",
    "title": "",
    "description": "",
    "category": ""
  },
  {
    "src": "/img/gallery/compressed/fluffy-cat.webp",
    "alt": "fluffy-cat",
    "title": "",
    "description": "",
    "category": ""
  },
  {
    "src": "/img/gallery/compressed/jesus.webp",
    "alt": "jesus",
    "title": "",
    "description": "",
    "category": ""
  },
  {
    "src": "/img/gallery/compressed/jesus3.webp",
    "alt": "jesus3",
    "title": "",
    "description": "",
    "category": ""
  },
  {
    "src": "/img/gallery/compressed/jesus4.webp",
    "alt": "jesus4",
    "title": "",
    "description": "",
    "category": ""
  },
  {
    "src": "/img/gallery/compressed/woman.webp",
    "alt": "woman",
    "title": "",
    "description": "",
    "category": ""
  },
  {
    "src": "/img/gallery/compressed/anime3.webp",
    "alt": "anime3",
    "title": "",
    "description": "",
    "category": ""
  },
  {
    "src": "/img/gallery/compressed/golden man.webp",
    "alt": "golden man",
    "title": "",
    "description": "",
    "category": ""
  },
  {
    "src": "/img/gallery/compressed/food.webp",
    "alt": "food",
    "title": "",
    "description": "",
    "category": ""
  },
  {
    "src": "/img/gallery/compressed/tiger2.webp",
    "alt": "tiger2",
    "title": "",
    "description": "",
    "category": ""
  },
  {
    "src": "/img/gallery/compressed/samus aran small(er).webp",
    "alt": "samus aran small(er)",
    "title": "",
    "description": "",
    "category": ""
  },
  {
    "src": "/img/gallery/compressed/fat knight.webp",
    "alt": "fat knight",
    "title": "",
    "description": "",
    "category": ""
  },
  {
    "src": "/img/gallery/compressed/demon.webp",
    "alt": "demon",
    "title": "",
    "description": "",
    "category": ""
  },
  {
    "src": "/img/gallery/compressed/chef knight.webp",
    "alt": "chef knight",
    "title": "",
    "description": "",
    "category": ""
  },
  {
    "src": "/img/gallery/compressed/fishman melee.webp",
    "alt": "fishman melee",
    "title": "",
    "description": "",
    "category": ""
  },
  {
    "src": "/img/gallery/compressed/pirate captain.webp",
    "alt": "pirate captain",
    "title": "",
    "description": "",
    "category": ""
  },
  {
    "src": "/img/gallery/compressed/lion man.webp",
    "alt": "lion man",
    "title": "",
    "description": "",
    "category": ""
  },
  {
    "src": "/img/gallery/compressed/study3.webp",
    "alt": "study3",
    "title": "",
    "description": "",
    "category": ""
  },
  {
    "src": "/img/gallery/compressed/drunk.webp",
    "alt": "drunk",
    "title": "",
    "description": "",
    "category": ""
  },
  {
    "src": "/img/gallery/compressed/all saints small.webp",
    "alt": "all saints small",
    "title": "",
    "description": "",
    "category": ""
  },
  {
    "src": "/img/gallery/compressed/demon lion.webp",
    "alt": "demon lion",
    "title": "",
    "description": "",
    "category": ""
  },
  {
    "src": "/img/gallery/compressed/undead dragon concept.webp",
    "alt": "undead dragon concept",
    "title": "",
    "description": "",
    "category": ""
  },
  {
    "src": "/img/gallery/compressed/demon2.webp",
    "alt": "demon2",
    "title": "",
    "description": "",
    "category": ""
  },
  {
    "src": "/img/gallery/compressed/skull enemy cncpt.webp",
    "alt": "skull enemy cncpt",
    "title": "",
    "description": "",
    "category": ""
  },
  {
    "src": "/img/gallery/compressed/skullalt2.webp",
    "alt": "skullalt2",
    "title": "",
    "description": "",
    "category": ""
  },
  {
    "src": "/img/gallery/compressed/skull.webp",
    "alt": "skull",
    "title": "",
    "description": "",
    "category": ""
  },
  {
    "src": "/img/gallery/compressed/faces male concept.webp",
    "alt": "faces male concept",
    "title": "",
    "description": "",
    "category": ""
  },
  {
    "src": "/img/gallery/compressed/predator drone.webp",
    "alt": "predator drone",
    "title": "",
    "description": "",
    "category": ""
  },
  {
    "src": "/img/gallery/compressed/fatman concept.webp",
    "alt": "fatman concept",
    "title": "",
    "description": "",
    "category": ""
  },
  {
    "src": "/img/gallery/compressed/floating head.webp",
    "alt": "floating head",
    "title": "",
    "description": "",
    "category": ""
  },
  {
    "src": "/img/gallery/compressed/fishman rng.webp",
    "alt": "fishman rng",
    "title": "",
    "description": "",
    "category": ""
  },
  {
    "src": "/img/gallery/compressed/mutated dragon.webp",
    "alt": "mutated dragon",
    "title": "",
    "description": "",
    "category": ""
  },
  {
    "src": "/img/gallery/compressed/wendigo.webp",
    "alt": "wendigo",
    "title": "",
    "description": "",
    "category": ""
  },
  {
    "src": "/img/gallery/compressed/giant crab concept.webp",
    "alt": "giant crab concept",
    "title": "",
    "description": "",
    "category": ""
  },
  {
    "src": "/img/gallery/compressed/anime2.webp",
    "alt": "anime2",
    "title": "",
    "description": "",
    "category": ""
  },
  {
    "src": "/img/gallery/compressed/tiger.webp",
    "alt": "tiger",
    "title": "",
    "description": "",
    "category": ""
  },
  {
    "src": "/img/gallery/compressed/drone.webp",
    "alt": "drone",
    "title": "",
    "description": "",
    "category": ""
  },
  {
    "src": "/img/gallery/compressed/gooner goblin.webp",
    "alt": "gooner goblin",
    "title": "",
    "description": "",
    "category": ""
  },
  {
    "src": "/img/gallery/compressed/cat.webp",
    "alt": "cat",
    "title": "",
    "description": "",
    "category": ""
  },
  {
    "src": "/img/gallery/compressed/spider cannon concept.webp",
    "alt": "spider cannon concept",
    "title": "",
    "description": "",
    "category": ""
  },
  {
    "src": "/img/gallery/compressed/enemy4.webp",
    "alt": "enemy4",
    "title": "",
    "description": "",
    "category": ""
  },
  {
    "src": "/img/gallery/compressed/pirate sketch.webp",
    "alt": "pirate sketch",
    "title": "",
    "description": "",
    "category": ""
  }
];

// Add id to each item
items.forEach((item, index) => {
  item.id = `photo${index + 1}`; // Start IDs from 1
});

export const POST: APIRoute = async ({ request }) => {
  try {
    // Parse the JSON body
    const body = await request.json();
    
    // Extract parameters from the body
    let pageSize = body.pageSize || 10;
    let page = body.page || 1;
    
    // Same pagination logic as GET
    let startIndex = (page - 1) * pageSize;
    let endIndex = startIndex + pageSize;
    let paginatedItems = items.slice(startIndex, endIndex);

    return new Response(
      JSON.stringify({
        items: paginatedItems,
        total: items.length,
        page: page,
        pageSize: pageSize,
      }),
      {
        headers: {
          "Content-Type": "application/json",
        },
      }
    );
  } catch (error) {
    console.error("Error processing POST request:", error);
    return new Response(
      JSON.stringify({
        error: "Failed to process request",
        details: error.message
      }), 
      {
        status: 400,
        headers: {
          "Content-Type": "application/json",
        },
      }
    );
  }
};