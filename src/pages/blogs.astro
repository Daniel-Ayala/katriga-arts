---
import PageLayout from '../layouts/PageLayout.astro';
import { getCollection } from 'astro:content';

// Get all blog posts and sort by date (newest first)
const allBlogPosts = await getCollection('blog');
const sortedPosts = allBlogPosts.sort((a, b) => {
  return new Date(b.data.date).getTime() - new Date(a.data.date).getTime();
});
---

<PageLayout>
  <!-- Heading -->
  <div class="relative text-center mb-12">
    <h2
      class="relative text-4xl md:text-5xl lg:text-6xl font-bold text-white z-10 animate-reveal"
    >
      <span
        class="bg-clip-text text-transparent bg-gradient-to-r from-white to-white"
      >
        Photography Insights
      </span>
    </h2>
    <p
      class="text-lg text-neutral-200 max-w-2xl mx-auto font-light mt-4"
    >
      Some insights about some of my works.
    </p>
  </div>

  <!-- Blogs Grid -->
  <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8">
    {sortedPosts.map((post) => (
      <div
        class="blog-item bg-neutral-800/50 rounded-xl overflow-hidden shadow-lg hover:shadow-white/20 transition-all duration-300 animate-reveal group"
        id={`blog-${post.data.id}`}
      >
        <a href={`/blog/${post.data.slug}`}>
          <img
            src={post.data.image}
            alt={post.data.imageAlt}
            class="w-full h-48 object-cover group-hover:scale-105 transition-transform duration-300"
            loading="lazy"
          />
        </a>
        <div class="p-6">
          <div
            class="flex items-center text-neutral-400 text-sm mb-2"
          >
            <i class="fas fa-calendar-alt mr-2"></i>
            <span>{post.data.date}</span>
          </div>
          <a href={`/blog/${post.data.slug}`}>
            <h3
              class="text-xl font-semibold text-white group-hover:text-white mb-3"
            >
              {post.data.title}
            </h3>
          </a>
          <p
            class="text-neutral-200 text-base mb-4 line-clamp-3"
          >
            {post.data.description}
          </p>
          <a
            href={`/blog/${post.data.slug}`}
            class="inline-flex items-center text-white hover:text-white font-medium transition-colors"
          >
            Read More
            <i class="fas fa-arrow-right ml-2"></i>
          </a>
        </div>
      </div>
    ))}
  </div>
</PageLayout>